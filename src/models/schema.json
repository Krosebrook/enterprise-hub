{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Enterprise Hub Data Schema",
  "version": "1.0.0",
  "description": "Complete data schema for Enterprise Hub entities managed by Base44",
  "entities": {
    "User": {
      "type": "object",
      "description": "Represents system users with role-based access control",
      "properties": {
        "id": {
          "type": "string",
          "description": "Auto-generated unique identifier"
        },
        "email": {
          "type": "string",
          "format": "email",
          "description": "User's email address (unique)"
        },
        "full_name": {
          "type": "string",
          "description": "User's full display name"
        },
        "role": {
          "type": "string",
          "enum": ["admin", "developer", "viewer", "auditor"],
          "description": "RBAC role determining user permissions"
        },
        "created_date": {
          "type": "string",
          "format": "date-time",
          "description": "Account creation timestamp"
        },
        "last_login": {
          "type": "string",
          "format": "date-time",
          "description": "Last login timestamp"
        },
        "avatar_url": {
          "type": "string",
          "format": "uri",
          "description": "URL to profile picture"
        },
        "preferences": {
          "type": "object",
          "description": "User-specific preferences and settings"
        }
      },
      "required": ["id", "email", "full_name", "role", "created_date"],
      "indexes": ["email", "role", "created_date"]
    },
    "Agent": {
      "type": "object",
      "description": "Represents AI agents managed within the system",
      "properties": {
        "id": {
          "type": "string",
          "description": "Auto-generated unique identifier"
        },
        "name": {
          "type": "string",
          "description": "Agent name"
        },
        "description": {
          "type": "string",
          "description": "Agent description and purpose"
        },
        "model": {
          "type": "string",
          "description": "AI model identifier (e.g., 'gpt-4', 'claude-3')",
          "examples": ["gpt-4", "gpt-4-turbo", "claude-3-opus", "claude-3-sonnet"]
        },
        "status": {
          "type": "string",
          "enum": ["draft", "deployed", "suspended", "archived"],
          "description": "Current deployment status"
        },
        "cost_per_request": {
          "type": "number",
          "minimum": 0,
          "description": "Cost per API request in USD"
        },
        "total_requests": {
          "type": "number",
          "minimum": 0,
          "description": "Total number of requests made"
        },
        "created_by": {
          "type": "string",
          "description": "User ID who created the agent"
        },
        "created_date": {
          "type": "string",
          "format": "date-time",
          "description": "Creation timestamp"
        },
        "updated_date": {
          "type": "string",
          "format": "date-time",
          "description": "Last update timestamp"
        },
        "deployment_date": {
          "type": "string",
          "format": "date-time",
          "description": "When agent was deployed"
        },
        "configuration": {
          "type": "object",
          "description": "Agent-specific configuration settings"
        },
        "tags": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Tags for organization and filtering"
        },
        "capabilities": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Agent capabilities and features"
        },
        "limitations": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Known limitations and constraints"
        },
        "compliance_status": {
          "type": "string",
          "enum": ["compliant", "non_compliant", "pending_review"],
          "description": "Compliance verification status"
        }
      },
      "required": ["id", "name", "description", "model", "status", "created_by", "created_date"],
      "indexes": ["status", "created_by", "created_date", "compliance_status", "model"]
    },
    "Architecture": {
      "type": "object",
      "description": "Represents cloud architecture designs",
      "properties": {
        "id": {
          "type": "string",
          "description": "Auto-generated unique identifier"
        },
        "name": {
          "type": "string",
          "description": "Architecture name"
        },
        "description": {
          "type": "string",
          "description": "Architecture description and purpose"
        },
        "cloud_provider": {
          "type": "string",
          "enum": ["aws", "gcp", "azure", "multi-cloud"],
          "description": "Primary cloud provider"
        },
        "region": {
          "type": "string",
          "description": "Primary deployment region",
          "examples": ["us-east-1", "us-west-2", "eu-west-1"]
        },
        "environment": {
          "type": "string",
          "enum": ["dev", "staging", "production"],
          "description": "Deployment environment"
        },
        "status": {
          "type": "string",
          "enum": ["draft", "active", "archived"],
          "description": "Architecture lifecycle status"
        },
        "components": {
          "type": "object",
          "description": "Infrastructure components configuration",
          "properties": {
            "vpc": {
              "type": "boolean",
              "description": "Include VPC/VNet"
            },
            "kubernetes": {
              "type": "boolean",
              "description": "Include Kubernetes cluster"
            },
            "relational_db": {
              "type": "boolean",
              "description": "Include relational database"
            },
            "object_storage": {
              "type": "boolean",
              "description": "Include object storage"
            },
            "monitoring": {
              "type": "boolean",
              "description": "Include monitoring/observability"
            },
            "load_balancer": {
              "type": "boolean",
              "description": "Include load balancer"
            },
            "cache": {
              "type": "boolean",
              "description": "Include caching layer"
            },
            "message_queue": {
              "type": "boolean",
              "description": "Include message queue"
            }
          }
        },
        "services": {
          "type": "array",
          "description": "Visual services on canvas",
          "items": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "description": "Service instance ID"
              },
              "type": {
                "type": "string",
                "description": "Service type"
              },
              "name": {
                "type": "string",
                "description": "Service name"
              },
              "position": {
                "type": "object",
                "properties": {
                  "x": {
                    "type": "number"
                  },
                  "y": {
                    "type": "number"
                  }
                }
              },
              "properties": {
                "type": "object",
                "description": "Service-specific properties"
              }
            }
          }
        },
        "created_by": {
          "type": "string",
          "description": "User ID who created the architecture"
        },
        "created_date": {
          "type": "string",
          "format": "date-time",
          "description": "Creation timestamp"
        },
        "updated_date": {
          "type": "string",
          "format": "date-time",
          "description": "Last update timestamp"
        },
        "tags": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Tags for organization"
        },
        "estimated_cost": {
          "type": "number",
          "minimum": 0,
          "description": "Monthly estimated cost in USD"
        },
        "terraform_generated": {
          "type": "boolean",
          "description": "Whether Terraform code has been generated"
        },
        "last_terraform_gen": {
          "type": "string",
          "format": "date-time",
          "description": "Last Terraform generation timestamp"
        }
      },
      "required": ["id", "name", "description", "cloud_provider", "environment", "status", "created_by", "created_date"],
      "indexes": ["cloud_provider", "environment", "status", "created_by", "created_date"]
    },
    "Policy": {
      "type": "object",
      "description": "Represents governance policies for AI agents and architectures",
      "properties": {
        "id": {
          "type": "string",
          "description": "Auto-generated unique identifier"
        },
        "name": {
          "type": "string",
          "description": "Policy name"
        },
        "description": {
          "type": "string",
          "description": "Policy description and purpose"
        },
        "type": {
          "type": "string",
          "enum": ["agent", "architecture", "data", "security"],
          "description": "Policy type"
        },
        "category": {
          "type": "string",
          "description": "Policy category",
          "examples": ["cost", "compliance", "security", "performance"]
        },
        "severity": {
          "type": "string",
          "enum": ["critical", "high", "medium", "low"],
          "description": "Policy severity level"
        },
        "rules": {
          "type": "array",
          "description": "Policy rules",
          "items": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "description": "Rule ID"
              },
              "condition": {
                "type": "string",
                "description": "Rule condition expression"
              },
              "action": {
                "type": "string",
                "description": "Action to take when violated"
              },
              "message": {
                "type": "string",
                "description": "Violation message"
              },
              "enabled": {
                "type": "boolean",
                "description": "Whether rule is enabled"
              }
            }
          }
        },
        "is_active": {
          "type": "boolean",
          "description": "Whether policy is currently enforced"
        },
        "applies_to": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Entity IDs this policy applies to"
        },
        "created_by": {
          "type": "string",
          "description": "User ID who created the policy"
        },
        "created_date": {
          "type": "string",
          "format": "date-time",
          "description": "Creation timestamp"
        },
        "updated_date": {
          "type": "string",
          "format": "date-time",
          "description": "Last update timestamp"
        },
        "last_evaluated": {
          "type": "string",
          "format": "date-time",
          "description": "Last evaluation timestamp"
        },
        "violations": {
          "type": "number",
          "minimum": 0,
          "description": "Current number of violations"
        },
        "enforcement_mode": {
          "type": "string",
          "enum": ["audit", "warn", "block"],
          "description": "Policy enforcement mode"
        }
      },
      "required": ["id", "name", "description", "type", "category", "severity", "is_active", "created_by", "created_date"],
      "indexes": ["type", "category", "severity", "is_active", "created_date"]
    },
    "ComplianceFramework": {
      "type": "object",
      "description": "Represents compliance frameworks (SOC2, HIPAA, GDPR, etc.)",
      "properties": {
        "id": {
          "type": "string",
          "description": "Auto-generated unique identifier"
        },
        "name": {
          "type": "string",
          "description": "Framework name",
          "examples": ["SOC2", "HIPAA", "GDPR", "ISO 27001", "PCI DSS"]
        },
        "version": {
          "type": "string",
          "description": "Framework version"
        },
        "description": {
          "type": "string",
          "description": "Framework description"
        },
        "requirements": {
          "type": "array",
          "description": "Compliance requirements",
          "items": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "description": "Requirement ID"
              },
              "title": {
                "type": "string",
                "description": "Requirement title"
              },
              "description": {
                "type": "string",
                "description": "Detailed description"
              },
              "status": {
                "type": "string",
                "enum": ["compliant", "non_compliant", "in_progress"],
                "description": "Compliance status"
              },
              "evidence_required": {
                "type": "boolean",
                "description": "Whether evidence is required"
              },
              "responsible_party": {
                "type": "string",
                "description": "User ID responsible for this requirement"
              }
            }
          }
        },
        "is_enabled": {
          "type": "boolean",
          "description": "Whether framework is actively tracked"
        },
        "compliance_score": {
          "type": "number",
          "minimum": 0,
          "maximum": 100,
          "description": "Overall compliance score"
        },
        "last_assessed": {
          "type": "string",
          "format": "date-time",
          "description": "Last assessment timestamp"
        },
        "certification_date": {
          "type": "string",
          "format": "date-time",
          "description": "Certification date"
        },
        "expiry_date": {
          "type": "string",
          "format": "date-time",
          "description": "Certification expiry date"
        },
        "auditor": {
          "type": "string",
          "description": "Auditor name"
        },
        "controls": {
          "type": "array",
          "items": {
            "type": "object"
          },
          "description": "Compliance controls"
        },
        "evidence": {
          "type": "array",
          "items": {
            "type": "object"
          },
          "description": "Evidence documents"
        }
      },
      "required": ["id", "name", "version", "description", "is_enabled"],
      "indexes": ["name", "is_enabled", "compliance_score", "last_assessed"]
    },
    "Activity": {
      "type": "object",
      "description": "Audit log for all system activities",
      "properties": {
        "id": {
          "type": "string",
          "description": "Auto-generated unique identifier"
        },
        "user_id": {
          "type": "string",
          "description": "User who performed the action"
        },
        "user_name": {
          "type": "string",
          "description": "User's display name (denormalized)"
        },
        "action": {
          "type": "string",
          "description": "Action performed",
          "examples": ["create", "update", "delete", "deploy", "archive"]
        },
        "entity_type": {
          "type": "string",
          "description": "Entity type affected",
          "examples": ["Agent", "Architecture", "Policy", "User"]
        },
        "entity_id": {
          "type": "string",
          "description": "ID of affected entity"
        },
        "entity_name": {
          "type": "string",
          "description": "Name of affected entity (denormalized)"
        },
        "timestamp": {
          "type": "string",
          "format": "date-time",
          "description": "When action occurred"
        },
        "ip_address": {
          "type": "string",
          "description": "User's IP address"
        },
        "user_agent": {
          "type": "string",
          "description": "Browser/client user agent"
        },
        "metadata": {
          "type": "object",
          "description": "Additional action-specific metadata"
        },
        "changes": {
          "type": "object",
          "description": "Before/after values for updates"
        },
        "status": {
          "type": "string",
          "enum": ["success", "failure"],
          "description": "Action result status"
        },
        "error_message": {
          "type": "string",
          "description": "Error message if status is failure"
        }
      },
      "required": ["id", "user_id", "user_name", "action", "entity_type", "entity_id", "timestamp", "status"],
      "indexes": ["user_id", "entity_type", "entity_id", "timestamp", "action"]
    },
    "Cost": {
      "type": "object",
      "description": "Tracks costs for agents and infrastructure",
      "properties": {
        "id": {
          "type": "string",
          "description": "Auto-generated unique identifier"
        },
        "agent_id": {
          "type": "string",
          "description": "Related agent ID"
        },
        "architecture_id": {
          "type": "string",
          "description": "Related architecture ID"
        },
        "date": {
          "type": "string",
          "format": "date",
          "description": "Cost date (YYYY-MM-DD)"
        },
        "amount": {
          "type": "number",
          "minimum": 0,
          "description": "Cost amount in specified currency"
        },
        "cloud_provider": {
          "type": "string",
          "description": "Cloud provider or service",
          "examples": ["aws", "gcp", "azure", "openai", "anthropic"]
        },
        "service": {
          "type": "string",
          "description": "Specific service name",
          "examples": ["EC2", "RDS", "S3", "GPT-4", "Claude"]
        },
        "region": {
          "type": "string",
          "description": "Region or availability zone"
        },
        "category": {
          "type": "string",
          "enum": ["compute", "storage", "network", "ai", "other"],
          "description": "Cost category"
        },
        "quantity": {
          "type": "number",
          "minimum": 0,
          "description": "Usage quantity"
        },
        "unit": {
          "type": "string",
          "description": "Unit of measurement",
          "examples": ["hours", "requests", "GB", "TB"]
        },
        "currency": {
          "type": "string",
          "default": "USD",
          "description": "Currency code"
        },
        "tags": {
          "type": "object",
          "description": "Cost allocation tags"
        },
        "created_date": {
          "type": "string",
          "format": "date-time",
          "description": "When cost was recorded"
        }
      },
      "required": ["id", "date", "amount", "cloud_provider", "service", "category", "created_date"],
      "indexes": ["agent_id", "architecture_id", "date", "cloud_provider", "category"]
    },
    "Metric": {
      "type": "object",
      "description": "Stores observability metrics for monitoring and alerting",
      "properties": {
        "id": {
          "type": "string",
          "description": "Auto-generated unique identifier"
        },
        "agent_id": {
          "type": "string",
          "description": "Related agent ID"
        },
        "architecture_id": {
          "type": "string",
          "description": "Related architecture ID"
        },
        "metric_name": {
          "type": "string",
          "description": "Metric name",
          "examples": ["response_time", "error_rate", "cpu_usage", "memory_usage"]
        },
        "value": {
          "type": "number",
          "description": "Metric value"
        },
        "unit": {
          "type": "string",
          "description": "Unit of measurement",
          "examples": ["ms", "percent", "count", "bytes"]
        },
        "timestamp": {
          "type": "string",
          "format": "date-time",
          "description": "When metric was recorded"
        },
        "tags": {
          "type": "object",
          "description": "Metric tags for filtering and grouping"
        },
        "metadata": {
          "type": "object",
          "description": "Additional metric metadata"
        }
      },
      "required": ["id", "metric_name", "value", "unit", "timestamp"],
      "indexes": ["agent_id", "architecture_id", "metric_name", "timestamp"]
    }
  },
  "relationships": {
    "User_to_Agent": {
      "type": "one-to-many",
      "from": "User",
      "to": "Agent",
      "foreignKey": "created_by"
    },
    "User_to_Architecture": {
      "type": "one-to-many",
      "from": "User",
      "to": "Architecture",
      "foreignKey": "created_by"
    },
    "User_to_Policy": {
      "type": "one-to-many",
      "from": "User",
      "to": "Policy",
      "foreignKey": "created_by"
    },
    "User_to_Activity": {
      "type": "one-to-many",
      "from": "User",
      "to": "Activity",
      "foreignKey": "user_id"
    },
    "Agent_to_Cost": {
      "type": "one-to-many",
      "from": "Agent",
      "to": "Cost",
      "foreignKey": "agent_id"
    },
    "Agent_to_Metric": {
      "type": "one-to-many",
      "from": "Agent",
      "to": "Metric",
      "foreignKey": "agent_id"
    },
    "Architecture_to_Cost": {
      "type": "one-to-many",
      "from": "Architecture",
      "to": "Cost",
      "foreignKey": "architecture_id"
    },
    "Architecture_to_Metric": {
      "type": "one-to-many",
      "from": "Architecture",
      "to": "Metric",
      "foreignKey": "architecture_id"
    }
  }
}
